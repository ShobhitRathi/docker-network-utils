version: '3'

services:
  portainer:
      image: portainer/portainer
      command: "--admin-password ${PORTAINER_ADMIN}"
# portainer admin pass gen command: docker run --rm httpd:2.4-alpine htpasswd -nbB admin <password> | cut -d ":" -f 2
      networks:
        - proxy
      volumes:
        - /var/run/docker.sock:/var/run/docker.sock
        - ./portainer-data:/data
      labels:
        - 'traefik.backend=portainer'
        - 'traefik.port=9000'
        - 'traefik.frontend.rule=Host:${FRONTEND_RULE_PTR}'
        - 'traefik.enable=true'
      restart: always


networks:
  proxy:
    external:
      name: reverse_traefik

